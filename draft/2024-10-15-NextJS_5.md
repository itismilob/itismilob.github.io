
## 예약 파일

page, layout와 같이 Nextjs에서 정의해놓은 라우팅 등의 기능을 가진 파일이다.
예약 파일들은 같은 폴더나 하위 폴더의 page.tsx에 적용된다.


### loading.tsx
page를 로딩하는 중에 보여주는 UI
내부적으로 react의 Suspense 컴포넌트를 사용하는 것처럼 page를 감싸서 로딩을 보여준다.

```tsx
<Layout>
	<Error fallback={<div>error.tsx</div>}>
		<Loading fallback={<div>loading.tsx</div>}>
			<div>page.tsx</div>
		</Loading>
	</Error>
</Layout>
```

### error.tsx
에러 페이지를 만들어서 에러가 발생하면 보여준다.
클라이언트 컴포넌트로 만들어 사용해야 한다.
props로 error와 reset함수를 받아와 사용할 수 있다.
error로 에러 메시지를 출력하고 reset함수로 페이지를 다시 로드한다.

```tsx
"use client";
export default function Error({
	error,
	reset,
}: {
	error: Error;
	reset: () => {};
}) {
	return (
		<div>
			<h4>Error!!</h4>
			<button onClick={() => {reset();}}>
				새로고침
			</button>
		</div>
	);
}
```


layout.tsx의 에러 체크는 하지 못하기 때문에 app 폴더에 global-error.tsx 파일을 만들어 사용한다.

---

### not-found.tsx

nextjs에는 기본적으로 notfound 페이지가 존재한다.
만약 DB에서 데이터를 불러올 때 notfound를 띄워야 한다면 not-found.tsx 파일을 사용한다.
next/navigation의 notFound함수로 not-found.tsx 파일을 불러온다.

```tsx
// 데이터를 불러오는 페이지
import {notFound} from "next/navigation";

...
if(!data){
	return notFound();
}
```


## 배포

배포하기 위해서 프로젝트를 빌드하고 클라우드 서비스 등에 올려서 서버를 실행시킨다.

프로젝트를 빌드 : `npm run build`
빌드한 프로젝트 실행 : `npm run start`

외부 서비스 설정
- 몽고디비에서 접속 가능 IP를 설정해줘야 한다.
- Github의 OAuth 앱 설정에서 Hompage URL을 변경해줘야 한다.

## 이미지 업로드 기능